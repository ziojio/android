ext {
    javaVersion = JavaVersion.VERSION_1_8

    android_config = [
            compileSdkVersion: 29,
            buildToolsVersion: '29.0.3',
            applicationId    : 'com.zhuj.android',
            minSdkVersion    : 23,
            targetSdkVersion : 29,
            versionCode      : 1,
            versionName      : '1.0.0',
            multiDexEnabled  : true,
    ]

    signConfigs = [
            "storeFile"    : "abc",
            "storePassword": "123456",
            "keyAlias"     : "abc",
            "keyPassword"  : "123456"
    ]
}

ext.version = [
        android_gradle_plugin      : "4.0.0",
        android_maven_gradle_plugin: "2.0",
        gradle_bintray_plugin      : "1.8.0",

        support                    : "28.0.0",
        lifecycle                  : "2.2.0",
        constraint_layout          : "2.0.1",
        room                       : "2.2.5",

        gson                       : "2.8.6",
        okhttp3                    : "3.14.9",
        okio                       : "1.17.5",
        eventbus                   : "3.2.0",
        glide                      : "4.11.0",
        lombok                     : "1.18.12",

        retrofit2                  : "2.9.0",
        agentweb                   : "4.1.3",
        dagger                     : "2.16",
        qmui                       : "2.0.0-alpha10",
        material                   : "1.1.0",
        fastjson                   : "1.2.73",

        junit                      : "4.12",
        espresso                   : "3.2.0",
        runner                     : "1.2.0"
]

def version = ext.version

ext.gradle_plugin = [
        android_gradle_plugin      : "com.android.tools.build:gradle:$version.android_gradle_plugin",
        android_maven_gradle_plugin: "com.github.dcendents:android-maven-gradle-plugin:$version.android_maven_gradle_plugin",
        gradle_bintray_plugin      : "com.jfrog.bintray.gradle:gradle-bintray-plugin:$version.gradle_bintray_plugin",
        freeline_gradle_plugin     : "com.antfortune.freeline:gradle:0.8.8"
]

ext.deps = [
        material          : "com.google.android.material:material:$version.material",
        qmui              : "com.qmuiteam:qmui:$version.qmui",

        lombok            : "org.projectlombok:lombok:$version.lombok",
        lombokProcessor   : "org.projectlombok:lombok:$version.lombok",

        glide             : "com.github.bumptech.glide:glide:$version.glide",
        glideProcessor    : "com.github.bumptech.glide:compiler:$version.glide",

        eventbus          : "org.greenrobot:eventbus:$version.eventbus",

        logger            : "com.orhanobut:logger:2.2.0",
        swiperefreshlayout: "androidx.swiperefreshlayout:swiperefreshlayout:1.0.0",
        yzjrecyclerview   : "com.yanzhenjie.recyclerview:x:1.3.2"
]

ext.deps.androidx = [
        appcompat       : "androidx.appcompat:appcompat:1.2.0",
        annotation      : "androidx.annotation:annotation:1.1.0",
        constraintlayout: "androidx.constraintlayout:constraintlayout:$version.constraint_layout",
        recyclerview    : "androidx.recyclerview:recyclerview:1.1.0",
        viewpager       : "androidx.viewpager:viewpager:1.0.0",
        cardview        : "androidx.cardview:cardview:1.0.0",
        multidex        : "androidx.multidex:multidex:2.0.0"
]

ext.deps.lifecycle = [
        runtime        : "androidx.lifecycle:lifecycle-runtime:$version.lifecycle",
        viewmodel      : "androidx.lifecycle:lifecycle-viewmodel:$version.lifecycle",
        livedata       : "androidx.lifecycle:lifecycle-livedata:$version.lifecycle",
        lifecycle_java8: "androidx.lifecycle:lifecycle-common-java8:$version.lifecycle",
        extensions     : "androidx.lifecycle:lifecycle-extensions:$version.lifecycle"
]

ext.deps.support = [
        design      : "com.android.support:design:$version.support",
        app_compat  : "com.android.support:appcompat-v7:$version.support",
        annotations : "com.android.support:support-annotations:$version.support",
        recyclerview: "com.android.support:recyclerview-v7:$version.support",
        cardview    : "com.android.support:cardview-v7:$version.support",
        v4          : "com.android.support:support-v4:$version.support",
        core_utils  : "com.android.support:support-core-utils:$version.support"
]

ext.deps.room = [
        runtime  : "androidx.room:room-runtime:$version.room",
        processor: "androidx.room:room-compiler:$version.room",
        rxjava2  : "android.arch.persistence.room:rxjava2:$version.room",
        testing  : "android.arch.persistence.room:testing:$version.room",
]

ext.deps.kotlin = [
        stdlib: "org.jetbrains.kotlin:kotlin-stdlib-jre7:$version.kotlin",
        test  : "org.jetbrains.kotlin:kotlin-test-junit:$version.kotlin",
        plugin: "org.jetbrains.kotlin:kotlin-gradle-plugin:$version.kotlin",
]

ext.deps.google = [
        gson   : "com.google.code.gson:gson:$version.gson",
        flexbox: "com.google.android:flexbox:2.0.1"
]

ext.deps.ali = [
        fastjson: "com.alibaba:fastjson:$version.fastjson",
]

ext.deps.webview = [
        agentweb   : "com.just.agentweb:agentweb:$version.agentweb",
        filechooser: "com.just.agentweb:filechooser:$version.agentweb",
        downloader : "com.download.library:Downloader:$version.agentweb",
]

ext.deps.squareup = [
        okhttp       : "com.squareup.okhttp3:okhttp:$version.okhttp3",
        okio         : "com.squareup.okio:okio:$version.okio",
        retrofit2    : "com.squareup.retrofit2:retrofit:$version.retrofit2",
        converterGson: "com.squareup.retrofit2:converter-gson:$version.retrofit2",
]

ext.deps.test = [
        espresso_core   : "androidx.test.espresso:espresso-core:$version.espresso",
        espresso_contrib: "androidx.test.espresso:espresso-contrib:$version.espresso",
        espresso_intents: "androidx.test.espresso:espresso-intents:$version.espresso",
        atsl_runner     : "com.android.support.test:runner:$version.atsl_runner",
        atsl_rules      : "com.android.support.test:rules:$version.atsl_runner"
]

ext.deps.dagger = [
        runtime                 : "com.google.dagger:dagger:$version.dagger",
        android                 : "com.google.dagger:dagger-android:$version.dagger",
        android_support         : "com.google.dagger:dagger-android-support:$version.dagger",
        compiler                : "com.google.dagger:dagger-compiler:$version.dagger",
        android_support_compiler: "com.google.dagger:dagger-android-processor:$version.dagger",
]

ext.deps.arouter = [
        api     : "com.alibaba:arouter-api:1.3.1",
        compiler: "com.alibaba:arouter-compiler:1.1.4"
]


static addRepos(RepositoryHandler handler) {
    // Add the Local repository
    // maven { url rootProject.file('../libs/repository') }
    handler.maven { url 'https://maven.aliyun.com/repository/google' }
    handler.maven { url 'https://maven.aliyun.com/repository/jcenter' }
    handler.maven { url 'https://maven.aliyun.com/repository/gradle-plugin' }
    handler.maven { url "http://maven.aliyun.com/nexus/content/groups/public/" }
    handler.maven { url "https://jitpack.io" }
    handler.maven { url "https://oss.sonatype.org/content/repositories/public" }
    handler.mavenLocal()
    handler.google()
    handler.jcenter()
    handler.mavenCentral()
}

ext.addRepos = this.&addRepos

static def getAppName(a) {
    def appId = a.defaultConfig.applicationId;
    return appId.substring(appId.lastIndexOf(".") + 1);
}

ext.getAppName = this.&getAppName

static def releaseTime() {
    return new Date().format("yyyyMMdd", TimeZone.getTimeZone("GMT+8"))
}

ext.releaseTime = this.&releaseTime